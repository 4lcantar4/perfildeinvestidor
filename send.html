<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" />
    <link rel="stylesheet" href="stylesend.css" />
    <title>QUIZ-Qual é o seu perfil de investidor?</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
      <div class="container">
        <br><br>
        <h1 class="heading"> Resultados do Quiz</h1>
        <hr>
        <br>
         <div class="start-screen">
         <p class="question" style="display: flex;flex-direction: column" id="mensagem">
            Obrigado por participar!
           <br><br/>
            Aguarde alguns instantes estamos salvando as respostas e calculando seu resultado!
        </p>
    <br><br/>
        <!-- Spinner de carregamento -->
        <div class="loader" id="spinner"></div>
        <br>
       <div>
        <button class="quit" id="restartbutton" style="display: none;">Reenviar</button>
        <a class="btn" href="https://sites.google.com/view/seuperfildeinvestidor/" style="margin-top: 10px; display: none;" id="verPerfisButton">Ver os perfis de aversão à perda</a>
    </div>


    <script type="text/javascript">
        // Evento para o botão de reenvio
        document.getElementById("restartbutton").addEventListener("click", function() {
            document.getElementById("restartbutton").style.display = "none";
            sendInformation();
        });

        // Função para enviar as informações
        function sendInformation() {
            let data = {};
            data.SocioEconomics = JSON.parse(localStorage.SocioEconomics);
            data.RiskAverssion = JSON.parse(localStorage.RiskAverssion);
            data.Quiz = JSON.parse(localStorage.Quiz);

            let jsonData = JSON.stringify(data);
            let encodedData = encodeURIComponent(jsonData);

            let url = `https://script.google.com/macros/s/AKfycby7vlwGMpMw36HLgxlYpsP4C7g0GK5a2rVUHdUeyNDGzlYGSzv6zlXLmx0vVpor3hI3tQ/exec?data=${encodedData}`;

            fetch(url, {
                method: "GET"
            }).then(response => {
                sucessoNoEnvio();
            }).catch(error => {
                falhaNoEnvio();
            });
        }

        // Função para lidar com sucesso no envio
        function sucessoNoEnvio() {
            document.getElementById("spinner").style.display = "none";
            calcularEExibirCoeficiente();
            document.getElementById("verPerfisButton").style.display = "block";
        }

        // Função para lidar com falha no envio
        function falhaNoEnvio() {
            document.getElementById("spinner").style.display = "none";
            document.getElementById("mensagem").textContent = "Ops..algo deu errado, clique no botão abaixo";
            document.getElementById("restartbutton").style.display = "block";
        }

 
    // Função para calcular e exibir o coeficiente
    function calcularEExibirCoeficiente() {
        if (localStorage.Quiz) {
            const quiz = JSON.parse(localStorage.Quiz);
            const coeficiente = quiz.etapa1 / quiz.etapa3;

            // Definindo estilos
            const baseStyle = "font-family: 'Poppins', sans-serif; font-size: 1em;";
            const coeficienteStyle = "color: #000000;"; // Preto
            const valorStyle = "color: #FF6600; font-weight: bold; font-size: 80px; text-align: center;"; // Laranja
            const perfilStyle = "color: #8A99A6;"; // Cinza
            const notaStyle = "color: #7A8794;"; // Cinza médio

            // Determinando o perfil
            let perfil = "";
            if (coeficiente < 0.5) {
                perfil = "Perfil: Aventureiro - O investidor aventureiro é impulsionado pela busca de altos rendimentos e está preparado para enfrentar riscos significativos no mercado. Este perfil não se intimida com a possibilidade de perdas substanciais e se concentra intensamente em maximizar os ganhos, evidenciado por um valor de λ que reflete uma forte inclinação para buscar altos retornos em vez de priorizar a segurança.";
            } else if (coeficiente < 1) {
                perfil = "Perfil: Arrojado - O perfil arrojado combina a busca por rentabilidade elevada com uma dose de prudência. Embora esteja disposto a assumir riscos consideráveis, há uma cautela subjacente que orienta suas escolhas de investimento. Com um valor de λ que denota uma busca moderada por ganhos, o investidor arrojado equilibra seu desejo de lucros com uma sensatez na hora de evitar perdas.";
            } else if (coeficiente < 1.75) {
                perfil = "Perfil: Moderado - O investidor moderado valoriza um equilíbrio entre risco e retorno, optando por riscos calculados em busca de uma rentabilidade sólida. Este perfil adapta suas estratégias de investimento conforme as flutuações do mercado, e o valor de λ indica uma aversão à perda que varia de neutra a ligeiramente baixa, refletindo uma postura equilibrada em relação a ganhos e segurança.";
            } else if (coeficiente < 2.5) {
                perfil = "Perfil: Equilibrado - Investidores equilibrados preferem uma harmonia entre lucratividade e segurança, estando abertos a riscos moderados. Este perfil prioriza a preservação do capital e está disposto a aceitar riscos baixos a moderados em busca de rendimentos. Com uma preferência por investimentos de baixo risco e alta liquidez, o λ deste investidor sugere uma cautela um pouco mais acentuada contra perdas.";
            } else if (coeficiente < 4) {
                perfil = "Perfil: Conservador - O conservador é um perfil que coloca a proteção do capital em primeiro lugar, preferindo riscos mínimos e valorizando investimentos seguros e relativamente líquidos. Esse investidor evita riscos de perda quase a qualquer custo, optando por aplicações de renda fixa com garantias robustas. Seu valor de λ reflete uma aversão significativa à perda, priorizando a segurança sobre ganhos potenciais.";
            } else {
                perfil = "Perfil: Cauteloso - Extremamente focado em segurança, o investidor cauteloso se desvia de riscos que possam levar a perdas, escolhendo investimentos de renda fixa com garantias fortes e sacrificando a possibilidade de lucros maiores. Mesmo que isso possa resultar em ganhos que não superam a inflação, a preservação do capital é a sua maior preocupação, como indicado por um valor de λ que representa uma forte aversão a perdas.";
            }

            // Adicionando a nota com estilo
            let nota = "<hr style='border: none; height: 1px; background-color: #c0c0c0; margin: 10px 0;' />" + // Linha divisória acima da nota
                       "<p style='text-align: justify; font-size: 0.8em; " + notaStyle + baseStyle + "'><i>Nota:</i> Conforme mencionado anteriormente, o propósito deste questionário é desenvolver uma ferramenta para avaliar o perfil de investidores. Atualmente, ele está em fase de construção. O seu resultado abaixo é apenas com base no seu grau de aversão a perda, isso significa que estamos te mostrando como você tende a agir em decisões financeiras, isso envolve escolher comprar algo hoje ou guardar e economizar para o futuro, a decisão em contratar seguros, a preocupação com a aposentadoria e é claro a escolha de investimentos em relação ao risco e ao retorno. Para que você consiga tomar decisões melhores, o link abaixo é um pequeno texto que vai te fornecer uma visão geral de quais aspectos você deve considerar junto à descoberta do seu grau de aversão a perda para avaliar o seu perfil de risco do investidor. As informações contidas nele são fornecidas exclusivamente para fins informativos, portanto, não devem ser interpretadas como recomendações de compra ou venda de produtos financeiros. Lembre-se: esta avaliação é um guia, não um destino final. Encorajamos uma exploração contínua e uma reflexão profunda sobre suas metas financeiras e estilo de vida, para que suas decisões de investimento sejam tão informadas e personalizadas quanto possível.</p>" +
                       "<hr style='border: none; height: 1px; background-color: #c0c0c0; margin: 10px 0;' />"; // Linha divisória abaixo da nota

            // Exibindo o coeficiente, perfil, nota e linha divisória
            document.querySelector('#mensagem').innerHTML = "<p style='" + coeficienteStyle + baseStyle + "'>Seu coeficiente de aversão à perda λ: " + "<span style='" + valorStyle + "'>" + coeficiente.toFixed(2) + "</span></p><br>" +
                                                            "<p style='" + perfilStyle + baseStyle + "'>" + perfil + "</p><br>" +
                                                            nota;
        }
    }


    // Inicializa o envio das informações
    sendInformation();
</script>

</body>
</html>


